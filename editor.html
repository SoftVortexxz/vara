<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropbox File Upload</title>
    <script src="https://unpkg.com/dropbox/dist/Dropbox-sdk.min.js"></script>
</head>
<body>
    <h1>Upload File to Dropbox</h1>
    <input type="file" id="fileInput">
    <button id="uploadButton">Upload</button>
    <div id="fileLinks"></div>

    <script>
        const ACCESS_TOKEN = 'sl.B8Mh3Q4pNLVhz6MHCAYdA7UXOrR3p9PE2-ENGHDxq5an2o0ydRhNSc4OyFjOUnusbnqxTzQs5vU5bcELTwRjJf61rJ6PeW4WbIwGI7T5etgNNJiLdx0jbtcSY_55DZXF1WQRrk6rDdBl';
        const dbx = new Dropbox.Dropbox({ accessToken: ACCESS_TOKEN });

        document.getElementById('uploadButton').addEventListener('click', function() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];

            if (file) {
                dbx.filesUpload({ path: '/' + file.name, contents: file })
                    .then(response => {
                        console.log('File uploaded:', response);
                        listFiles();
                    })
                    .catch(error => {
                        console.error('Error uploading file:', error);
                    });
            }
        });

        function listFiles() {
            dbx.filesListFolder({ path: '' })
                .then(response => {
                    const fileLinks = document.getElementById('fileLinks');
                    fileLinks.innerHTML = '';
                    response.entries.forEach(file => {
                        const link = document.createElement('a');
                        link.href = 'https://www.dropbox.com/home' + file.path_display;
                        link.textContent = file.name;
                        link.target = '_blank';
                        fileLinks.appendChild(link);
                        fileLinks.appendChild(document.createElement('br'));
                    });
                })
                .catch(error => {
                    console.error('Error listing files:', error);
                });
        }
    </script>
</body>
</html>
